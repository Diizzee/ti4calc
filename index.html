<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="Content-Language" content="en">
	<title>Twilight Imperium IV battle calculator</title>

	<link href="css/bootstrap.css" type="text/css" rel="stylesheet"/>
	<link href="css/index_style.css" type="text/css" rel="stylesheet"/>
	<link rel="shortcut icon" href="favicon.gif" type="image/x-icon"/>

	<script type="text/javascript" src="js/jquery-3.3.1.slim.min.js">/*RGraph needs jQuery. I don't*/</script>
	<script type="text/javascript" src="js/vue.min.js"></script>
	<script type="text/javascript" src="js/lodash.core.min.js"></script>
	<script type="text/javascript" src="js/RGraph.min.js"></script>
	<script type="text/javascript" src="structs.js"></script>
	<script type="text/javascript" src="game-elements.js"></script>
	<script type="text/javascript" src="calculator.js"></script>
	<script type="text/javascript" src="imitator.js"></script>

</head>
<body>
<div id="root" class="container">
	<div class="row">
		<div class="col">Attacker</div>
		<div class="col btn-group btn-group-toggle">
			<label class="btn btn-outline-secondary" :class="{ active: battleType === BattleType.Space }">
				<input type="radio" name="battleType" id="option1"
					   v-bind:value="BattleType.Space" v-model="battleType">Space Battle
			</label>
			<label class="btn btn-outline-secondary" :class="{ active: battleType === BattleType.Ground }">
				<input type="radio" name="battleType" id="option2"
					   v-bind:value="BattleType.Ground" v-model="battleType">Invasion Combat
			</label>
		</div>
		<div class="col offset-2">Defender</div>
	</div>
	<div id="races" class="row justify-content-center">
		<select v-model="options.attacker.race" class="col-auto">
			<option v-for="(name, key) in Races" v-bind:value="key">
				{{ name }}
			</option>
		</select>
		<select v-model="options.defender.race" class="col-auto offset-2">
			<option v-for="(name, key) in Races" v-bind:value="key">
				{{ name }}
			</option>
		</select>
	</div>
	<div id="counters">
		<div class="row no-gutters justify-content-center" v-for="(name, key) in UnitType">
			<div class="counter input-group">
				<div class="input-group-prepend btn-group-toggle">
					<label class="btn btn-outline-secondary"
						   title="Unit upgrade"
						   :class="{ active: attackerUnits[key].upgraded,
									 hidden: !upgradeable(options.attacker.race, key) }">
						<input type="checkbox" autocomplete="off" v-model="attackerUnits[key].upgraded">^
					</label>
					<button type="button" class="btn btn-outline-secondary" @click="decrement(attackerUnits[key])">-
					</button>
				</div>
				<input v-model.number="attackerUnits[key].count" class="form-control" type="number" min="0">
				<div class="input-group-append">
					<button type="button" class="btn btn-outline-secondary" @click="increment(attackerUnits[key])">+
					</button>
				</div>
			</div>
			<div class="col unit-name">{{name}}</div>
			<div class="counter input-group">
				<div class="input-group-prepend">
					<button type="button" class="btn btn-outline-secondary" @click="decrement(defenderUnits[key])">-
					</button>
				</div>
				<input v-model.number="defenderUnits[key].count" class="form-control" type="number" min="0">
				<div class="input-group-append btn-group-toggle">
					<button type="button" class="btn btn-outline-secondary" @click="increment(defenderUnits[key])">+
					</button>
					<label class="btn btn-outline-secondary"
						   title="Unit upgrade"
						   :class="{ active: defenderUnits[key].upgraded,
									 hidden: !upgradeable(options.defender.race, key) }">
						<input type="checkbox" autocomplete="off" v-model="defenderUnits[key].upgraded">^
					</label>
				</div>
			</div>
		</div>
	</div>
	<div id="options">
		<div class="row">Technologies</div>
		<div class="row no-gutters justify-content-center" v-for="(option, key) in Technologies">
			<div class="col form-check">
				<input type="checkbox" class="form-check-input" v-bind:id="'attacker.' + key"
					   v-model="options.attacker[key]">
				<label class="form-check-label" v-bind:for="'attacker.' + key" v-bind:title="option.description">{{option.title}}</label>
				<span class="help" v-bind:title="option.description"></span>
			</div>
			<div class="col form-check">
				<input type="checkbox" class="form-check-input" v-bind:id="'defender.' + key"
					   v-model="options.defender[key]">
				<label class="form-check-label" v-bind:for="'defender.' + key" v-bind:title="option.description">{{option.title}}</label>
				<span class="help" v-bind:title="option.description"></span>
			</div>
		</div>
		<div class="row">ActionCards</div>
		<div class="row no-gutters justify-content-center" v-for="(option, key) in ActionCards">
			<div class="col form-check">
				<input type="checkbox" class="form-check-input" v-bind:id="'attacker.' + key"
					   v-model="options.attacker[key]">
				<label class="form-check-label" v-bind:for="'attacker.' + key" v-bind:title="option.description">{{option.title}}</label>
				<span class="help" v-bind:title="option.description"></span>
			</div>
			<div class="col form-check">
				<input type="checkbox" class="form-check-input" v-bind:id="'defender.' + key"
					   v-model="options.defender[key]">
				<label class="form-check-label" v-bind:for="'defender.' + key" v-bind:title="option.description">{{option.title}}</label>
				<span class="help" v-bind:title="option.description"></span>
			</div>
		</div>
	</div>
	<div id="result-area">
		<canvas id="chart-area" width="600px" height="400px"></canvas>
		<canvas id="chart-area-overlay" width="600px" height="400px"></canvas>
	</div>
</div>
<script type="text/javascript" src="index.js"></script>
<script type="text/javascript">
	var list = document.getElementsByClassName('help');
	for (var i = 0; i < list.length; i++) {
		list[i].onclick = function () {
			alert(this.getAttribute('title'));
		};
	}
</script>
</body>
</html>
